/*
** server_running.c for SERVER in /home/gouet_v/Rendu/semester4/PSU/PSU_2015_zappy
** 
** Made by Victor Gouet
** Login   <gouet_v@epitech.net>
** 
** Started on  Sat Jun 25 18:44:02 2016 Victor Gouet
** Last update Sat Jun 25 18:44:32 2016 Victor Gouet
*/

#include "../include_server/server.h"

int		server_running_event()
{
  if (init_select(&fds, server->socket.sock, &list) == -1)
    break;
  if (FD_ISSET(server->socket.sock, &fds))
    {
      if ((client = get_client_connection(server)) == NULL ||
	  ((ref = add_client_to_list(&list, UNKNOWN, client)) == NULL))
	break;
      bufferise(ref, BIENVENUE);
      ressources_generation(&list, list.map, 3, 6);
    }
  else
    // TODO on stop tout si on recoit 2
    event_client(&list, command, &fds, server);

}
